<ion-content class="hide-scrollbar">
  <!-- Global styles for hiding scrollbars -->
  <style>
    .hide-scrollbar {
      scrollbar-width: none !important; /* Firefox */
      -ms-overflow-style: none !important; /* IE and Edge */
    }
    .hide-scrollbar::-webkit-scrollbar {
      display: none !important; /* Chrome, Safari, Opera */
      width: 0 !important;
      height: 0 !important;
    }
    
    /* Apply to ion-content scrollable area */
    ion-content::part(scroll) {
      scrollbar-width: none !important;
      -ms-overflow-style: none !important;
    }
    ion-content::part(scroll)::-webkit-scrollbar {
      display: none !important;
      width: 0 !important;
      height: 0 !important;
    }
  </style>
  <!-- Top image -->
  <div class="top-image">
    <img
      [src]="darkModeEnabled ? 'assets/top-chat-white.png' : 'assets/top-chat.png'"
      alt="Chats Header"
    />
  </div>

  <!-- Segment for switching between Chats and Active -->
  <ion-segment
    [(ngModel)]="segmentValue"
    (ionChange)="onSegmentChange($event)"
    class="custom-segment"
  >
    <ion-segment-button
      value="chats"
      class="custom-segment-button dark:text-darkText"
    >
      <ion-label>Chats</ion-label>
    </ion-segment-button>
    <ion-segment-button value="active" class="custom-segment-button">
      <ion-label>Active</ion-label>
    </ion-segment-button>
  </ion-segment>

  <!-- Chats Section -->
  <ion-list *ngIf="segmentValue === 'chats'" class="user-list hide-scrollbar">
    <ion-item
      *ngFor="let chat of recentChats"
      lines="none"
      class="user-item"
      (click)="startChat(chat.otherParticipant.uid)"
    >
      <ion-avatar slot="start">
        <img
          [src]="chat.otherParticipant?.profilePictureUrl || './assets/profile-placeholder.jpg'"
        />
      </ion-avatar>

      <ion-label>
        <h2>{{ chat.otherParticipant?.fullName || 'Unknown User' }}</h2>
        <p>{{ chat.lastMessage?.content || 'No messages yet' }}</p>
      </ion-label>

      <!-- Badge for unread messages -->
      <ion-badge *ngIf="chat.unreadCount > 0" color="danger" slot="end">
        {{ chat.unreadCount }}
      </ion-badge>
    </ion-item>
  </ion-list>

  <!-- Active Section -->
  <ion-list *ngIf="segmentValue === 'active'" class="user-list active-section hide-scrollbar">
    <ion-item *ngFor="let user of activeUsers" (click)="startChat(user.id)">
      <ion-avatar slot="start">
        <img [src]="user.avatar" />
      </ion-avatar>
      <ion-label>
        <h2>{{ user.fullName || 'Unknown User' }}</h2>
        <p>{{ user.status || 'Active now' }}</p>
      </ion-label>
      <ion-icon
        name="ellipse"
        color="success"
        slot="end"
        class="status-icon"
      ></ion-icon>
    </ion-item>
  </ion-list>
</ion-content>
