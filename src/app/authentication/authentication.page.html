<ion-header [translucent]="true"></ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense"> </ion-header>

  <div class="container">
    <div class="forms-container">
      <div class="signin-signup">
        <form
  class="sign-in-form"
  [formGroup]="loginForm"
  novalidate
>
  <ion-img src="./assets/LOGO.png" class="image1"></ion-img>
  <h2 class="title">Sign in</h2>
  <p>Enter your email and password below to Login.</p>
  <div *ngIf="errorMessage" class="error-message">
    <ion-text color="danger">{{ errorMessage }}</ion-text>
  </div>
  
  <!-- Email field with floating label -->
  <div class="floating-input-field" [ngClass]="{
    'is-valid': loginForm.controls?.['email'].valid && loginForm.controls?.['email'].touched,
    'is-invalid': loginForm.controls?.['email'].invalid && loginForm.controls?.['email'].touched
  }">
  <ion-icon 
  [name]="loginForm.controls?.['email']?.valid ? 'mail' : 'mail-outline'" 
  class="icon-left">
</ion-icon>

    <div class="input-container">
      <ion-input 
        type="text" 
        formControlName="email"
        required
      ></ion-input>
      <label>Email</label>
    </div>
  </div>
  <div *ngIf="loginForm.controls?.['email'].touched && loginForm.controls?.['email'].invalid" class="validation-error">
    <ion-text *ngIf="loginForm.controls?.['email'].errors?.['required']">
      Email is required
    </ion-text>
    <ion-text *ngIf="loginForm.controls?.['email'].errors?.['pattern']">
      Enter a valid email
    </ion-text>
  </div>
  
  <!-- Password field with floating label -->
  <div class="floating-input-field password-field" [ngClass]="{
    'is-valid': loginForm.controls?.['password'].valid && loginForm.controls?.['password'].touched,
    'is-invalid': loginForm.controls?.['password'].invalid && loginForm.controls?.['password'].touched
  }">
    <ion-icon [name]="loginForm.controls?.['password']?.valid ? 'lock-closed' : 'lock-closed-outline'" class="icon-left"></ion-icon>
    <div class="input-container">
      <ion-input 
        [type]="showPassword ? 'text' : 'password'"
        formControlName="password"
        required
      ></ion-input>
      <label>Password</label>
    </div>
    <ion-icon
      [name]="showPassword ? 'eye-off-outline' : 'eye-outline'"
      (click)="togglePasswordVisibility()"
      class="password-toggle-icon"
    ></ion-icon>
  </div>
  <div *ngIf="loginForm.controls?.['password'].touched && loginForm.controls?.['password'].invalid" class="validation-error">
    <ion-text *ngIf="loginForm.controls?.['password'].errors?.['required']">
      Password is required
    </ion-text>
    <ion-text *ngIf="loginForm.controls?.['password'].errors?.['pattern']">
      Password must contain 8 characters
    </ion-text>
  </div>

  <button
    type="submit"
    class="btn solid"
    (click)="signIn()"
    [disabled]="!loginForm.valid"
  >
    Login
  </button>
  <button
    type="button"
    class="forgot-password-btn"
    (click)="resetPassword()"
  >
    Forgot Password?
  </button>
</form>

        <form
          class="sign-up-form"
          [formGroup]="regForm"
          novalidate
        >
          <ion-img src="./assets/LOGO.png" class="image2"></ion-img>
          <h2 class="title">Sign up</h2>
          <p>Create your account to get started.</p>
          
          <!-- Username -->
          <div class="floating-input-field" [ngClass]="{
            'is-valid': regForm.controls?.['fullname'].valid && regForm.controls?.['fullname'].touched,
            'is-invalid': regForm.controls?.['fullname'].invalid && regForm.controls?.['fullname'].touched
          }">
            <ion-icon name="person-outline" class="icon-left"></ion-icon>
            <div class="input-container">
              <ion-input
                type="text"
                formControlName="fullname"
                required
              ></ion-input>
              <label>Username</label>
            </div>
          </div>
          <div *ngIf="regForm.controls?.['fullname'].touched && regForm.controls?.['fullname'].invalid" class="validation-error">
            <ion-text *ngIf="regForm.controls?.['fullname'].errors?.['required']">
              Username is required
            </ion-text>
          </div>

          <!-- Email -->
          <div class="floating-input-field" [ngClass]="{
            'is-valid': regForm.controls?.['email'].valid && regForm.controls?.['email'].touched,
            'is-invalid': regForm.controls?.['email'].invalid && regForm.controls?.['email'].touched
          }">
            <ion-icon [name]="regForm.controls?.['email']?.valid ? 'mail' : 'mail-outline'" class="icon-left"></ion-icon>
            <div class="input-container">
              <ion-input
                type="text"
                formControlName="email"
                required
              ></ion-input>
              <label>Email</label>
            </div>
          </div>
          <div *ngIf="regForm.controls?.['email'].touched && regForm.controls?.['email'].invalid" class="validation-error">
            <ion-text *ngIf="regForm.controls?.['email'].errors?.['required']">
              Email is required
            </ion-text>
            <ion-text *ngIf="regForm.controls?.['email'].errors?.['pattern']">
              Please use your GSuite account
            </ion-text>
          </div>

          <!-- Contact Number -->
          <div class="floating-input-field" [ngClass]="{
            'is-valid': regForm.controls?.['contact'].valid && regForm.controls?.['contact'].touched,
            'is-invalid': regForm.controls?.['contact'].invalid && regForm.controls?.['contact'].touched
          }">
            <ion-icon name="call-outline" class="icon-left"></ion-icon>
            <div class="input-container">
              <ion-input
                type="tel"
                formControlName="contact"
                required
              ></ion-input>
              <label>Contact Number</label>
            </div>
          </div>
          <div *ngIf="regForm.controls?.['contact'].touched && regForm.controls?.['contact'].invalid" class="validation-error">
            <ion-text *ngIf="regForm.controls?.['contact'].errors?.['required']">
              Contact number is required
            </ion-text>
            <ion-text *ngIf="regForm.controls?.['contact'].errors?.['pattern']">
              Enter a valid 11 digits mobile number
            </ion-text>
          </div>

          <!-- Password -->
          <div class="floating-input-field password-field" [ngClass]="{
            'is-valid': regForm.controls?.['password'].valid && regForm.controls?.['password'].touched,
            'is-invalid': regForm.controls?.['password'].invalid && regForm.controls?.['password'].touched
          }">
            <ion-icon [name]="regForm.controls?.['password']?.valid ? 'lock-closed' : 'lock-closed-outline'" class="icon-left"></ion-icon>
            <div class="input-container">
              <ion-input
                [type]="showPassword ? 'text' : 'password'"
                formControlName="password"
                required
              ></ion-input>
              <label>Password</label>
            </div>
            <ion-icon
              [name]="showPassword ? 'eye-off-outline' : 'eye-outline'"
              (click)="togglePasswordVisibility()"
              class="password-toggle-icon"
            ></ion-icon>
          </div>
          <div *ngIf="regForm.controls?.['password'].touched && regForm.controls?.['password'].invalid" class="validation-error">
            <ion-text *ngIf="regForm.controls?.['password'].errors?.['required']">
              Password is required
            </ion-text>
            <ion-text *ngIf="regForm.controls?.['password'].errors?.['pattern']">
              Password must contain 8 characters
            </ion-text>
          </div>

          <!-- Department -->
          <div class="floating-input-field" [ngClass]="{
            'is-valid': regForm.controls?.['department'].valid && regForm.controls?.['department'].touched,
            'is-invalid': regForm.controls?.['department'].invalid && regForm.controls?.['department'].touched
          }">
            <ion-icon name="school-outline" class="icon-left"></ion-icon>
            <div class="input-container">
              <ion-select
                formControlName="department"
                placeholder="Select your department"
                required
              >
                <ion-select-option value="CICS">College of Informatics and Computing Sciences (CICS)</ion-select-option>
                <ion-select-option value="CET">College of Engineering Technology (CET)</ion-select-option>
                <ion-select-option value="CTE">College of Teacher Education (CTE)</ion-select-option>
                <ion-select-option value="CAS">College of Arts and Sciences (CAS)</ion-select-option>
                <ion-select-option value="CABEIHM">College of Accountancy, Business, Economics and International Hospitality Management (CABEIHM)</ion-select-option>
              </ion-select>
              <label>Department</label>
            </div>
          </div>
          <div *ngIf="regForm.controls?.['department'].touched && regForm.controls?.['department'].invalid" class="validation-error">
            <ion-text *ngIf="regForm.controls?.['department'].errors?.['required']">
              Department selection is required
            </ion-text>
          </div>
          <button 
            type="submit" 
            class="btn solid" 
            (click)="signUp()"
            [disabled]="!regForm.valid"
          >
            Sign up
          </button>
        </form>
      </div>
    </div>

    <div class="panels-container">
      <div class="panel left-panel">
        <div class="content">
          <h3>Let's connect, spartan!</h3>
          <p>
            Become part of something bigger.<br />
            Connect, learn, and grow with RedConnect+ !
          </p>

          <button class="btn transparent" id="sign-up-btn">Sign up</button>
        </div>
      </div>
      <div class="panel right-panel">
        <div class="content">
          <h3>Already have an account?</h3>
          <p>Click the button to LOGIN!</p>
          <button class="btn transparent" id="sign-in-btn">Sign in</button>
        </div>
      </div>
    </div>
  </div>
</ion-content>
